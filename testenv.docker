FROM gitlab.manytask.org:5050/hse-advanced-python/public-2025-fall/base-image:latest

COPY . /opt/hse
RUN python3 -m pip install /opt/hse/tools/testlib
RUN cp /opt/hse/.gitlab-ci.yml /opt/hse/.grader-ci.yml  # Create reference for comparison when running tests

RUN find /opt/hse/ -name '*.py' | xargs chmod o-rwx

# debug
RUN python3 -m pip uninstall -y manytask-checker
RUN python3 -m pip install git+https://github.com/manytask/checker.git